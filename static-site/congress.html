<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Audio Stream Playback</title>
  <!-- Include Dash.js for DASH playback -->
  <script src="https://cdn.dashjs.org/latest/dash.all.min.js"></script>
</head>
<body>
  <!-- Label and player for the DASH stream -->
  <label for="dashAudioPlayer">DASH Stream Playback:</label>
  <audio id="dashAudioPlayer" controls preload="none"></audio>

  <!-- Label and player for the MP3 stream -->
  <label for="cspan-radio">C-Span Radio:</label>
  <audio id="cspan-radio" controls preload="none">
    <source src="https://26233.live.streamtheworld.com/CSPANRADIO.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>
  <label for="vpm-news">VPM News:</label>
  <audio id="vpm-news" controls preload="none">
    <source src="https://26303.live.streamtheworld.com/WCVEFM.mp3?uuid=my2ine04" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <script>
    (function () {
      var dashPlayer;https://houseliveprod.streaming.mediaservices.windows.net/4fa1d511-4315-4043-a605-60827c36ffa7/44d95121-464b-46b0-b6cc-8df7a1c0221e.ism/manifest(format=mpd-time-csf)
      var dashManifestUrl = 'https://houseliveprod.streaming.mediaservices.windows.net/56363bc0-ddd8-469f-88d1-619a8ce32551/0a8c2cf7-806c-460a-992a-23cdae66aa15.ism/manifest(format=mpd-time-csf)';
      var dashAudioPlayer = document.querySelector("#dashAudioPlayer");

      // Function to initialize Dash.js player
      function initializeDashPlayer() {
        if (!dashPlayer) {
          dashPlayer = dashjs.MediaPlayer().create();
          dashPlayer.initialize(dashAudioPlayer, dashManifestUrl, false);
          dashPlayer.updateSettings({
            'streaming': {
              'fastSwitchEnabled': false,
              'abr': {
                'autoSwitchBitrate': {
                  'audio': false // Disable automatic bitrate switching for audio
                }
              }
            }
          });

          // After the DASH manifest is loaded, select the lowest quality audio track
          dashPlayer.on(dashjs.MediaPlayer.events.MANIFEST_LOADED, function () {
            var audioBitrates = dashPlayer.getBitrateInfoListFor('audio');
            if (audioBitrates.length) {
              audioBitrates.sort(function (a, b) { return a.bitrate - b.bitrate; });
              dashPlayer.setQualityFor('audio', audioBitrates[0].qualityIndex);
            }
          });
        }
      }

      // Event listener to initialize DASH player when user hits play
      dashAudioPlayer.addEventListener('play', initializeDashPlayer, { once: true });
    })();
  </script>
</body>
</html>
